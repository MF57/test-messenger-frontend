<html lang="en">

<head>
  <meta charset="utf-8">
  <title></title>

  <style>
    #messenger {
      display: none;
    }
  </style>
</head>

<body>
<script>
  (function(d, s, id){
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/messenger.Extensions.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'Messenger'));
</script>

<!-- Add your site or application content here -->
<p>Hello world! This is HTML5 Boilerplate.</p>
<div id="messenger">
  OPENED FROM MESSENGER
</div>
<div id="thread"></div>


<script>

  window.extAsyncInit = function() {
    // the Messenger Extensions JS SDK is done loading
    let messenger = document.getElementById("messenger");
    messenger.style.display = "block";


    MessengerExtensions.getContext('410323486289712',
      function success(thread_context){
        // success
        let thread = document.getElementById("thread");
        thread.innerText = JSON.stringify(thread_context)
      },
      function error(err){
        // error
        let thread = document.getElementById("thread");
        alert(err);
        thread.innerText = JSON.stringify(err);
      }
    );

  };
</script>
</body>

</html>
